<!--
@file: docs/tasktracker.md
@description: Трекер задач проекта MksDdn Postman Collection
@dependencies: docs/Project.md
@created: 2025-08-19
-->

## Задача: Инициализация документации
- **Статус**: Завершена
- **Описание**: Создать базовые документы в `docs/`.
- **Шаги выполнения**:
  - [x] Создать `Project.md`
  - [x] Создать `tasktracker.md`
  - [x] Создать `changelog.md`
  - [x] Создать `Diary.md`
  - [x] Создать `qa.md`
- **Зависимости**: Нет

## Задача: Ответы на вопросы в QA
- **Статус**: Завершена
- **Описание**: Сформулировать и зафиксировать ответы в `docs/qa.md`.
- **Шаги выполнения**:
  - [x] Установить минимальные версии WP/PHP и Tested up to
  - [x] Определить slug/text-domain
  - [x] Выбрать лицензию и ссылки автора
  - [x] Решить по мультисайту, i18n, WP-CLI, capabilities
  - [x] Определить правила `.gitignore`
- **Зависимости**: Нет

## Задача: Приведение заголовков и метаданных плагина к требованиям PCP
- **Статус**: Завершена
- **Описание**: Обновить заголовки в `postman-collection.php`, добавить `Text Domain`, версии WP/PHP, лицензию.
- **Шаги выполнения**:
  - [x] Добавить `Requires at least`, `Tested up to`, `Requires PHP`
  - [x] Добавить `Text Domain` и `Domain Path`
  - [x] Добавить `License` и `License URI`
  - [x] Проверить `Author`/`Author URI`
- **Зависимости**: Ответы в `docs/qa.md` (минимальные версии, лицензия)

## Задача: Интернационализация (i18n)
- **Статус**: В процессе
- **Описание**: Добавить поддержку переводов.
- **Шаги выполнения**:
  - [x] Ввести `load_plugin_textdomain`
  - [x] Обернуть пользовательские строки в `__()`/`_e()`
  - [x] Сгенерировать `.pot`
- **Зависимости**: Обновление заголовков (Text Domain)

## Задача: Экранирование и санитизация админ-формы
- **Статус**: Завершена
- **Описание**: Привести вывод/ввод к WPCS и рекомендациям PCP.
- **Шаги выполнения**:
  - [x] Полный проход по `class-postman-admin.php` на предмет `esc_attr`, `esc_html`, `esc_url`
  - [x] Санитизировать массивы `$_POST` при чтении
  - [x] Добавить `nonce`-поля на все действия (проверить текущие)
- **Зависимости**: Нет

## Задача: Readme.txt для WordPress.org
- **Статус**: Завершена
- **Описание**: Подготовить readme в формате каталога.
- **Шаги выполнения**:
  - [ ] Описание, краткое описание, теги
  - [ ] Раздел Installation/FAQ/Screenshots/Changelog
  - [ ] Ссылки и совместимость
- **Зависимости**: Метаданные плагина

## Задача: Настроить PHPCS и PHPCompatibility (локально)
- **Статус**: В процессе
- **Описание**: Добавить локальные правила для код-стайла и совместимости.
- **Шаги выполнения**:
  - [x] Добавить `phpcs.xml.dist` с WPCS
  - [ ] Добавить PHPCompatibility правила
  - [ ] Настроить локальный pre-commit hook
- **Зависимости**: Нет

## Задача: Удалено — CI-проверки (PCP + PHPCS)
- **Статус**: Закрыта
- **Описание**: Решено не использовать CI. Проверки выполняются локально.
- **Шаги выполнения**:
  - [x] Исключить GitHub Actions из плана
- **Зависимости**: Нет

## Задача: Добавить WP-CLI команду экспорта
- **Статус**: Завершена
- **Описание**: Реализовать CLI-команду для экспорта коллекции.
- **Шаги выполнения**:
  - [x] Добавить класс `Postman_CLI`
  - [x] Зарегистрировать команду `wp mksddn-postman export`
  - [x] Обновить `readme.txt` с примерами
- **Зависимости**: Нет

## Задача: Подготовка к публикации в SVN
- **Статус**: Не начата
- **Описание**: Подготовить структуру для SVN (`trunk/`, `tags/`).
- **Шаги выполнения**:
  - [ ] Сформировать содержимое каталога `mksddn-postman-collection`
  - [ ] Проверить readme и заголовки
  - [ ] Тест обновления на тестовом сайте
- **Зависимости**: Readme, PCP

## Задача: Uninstall обработчик
- **Статус**: Завершена
- **Описание**: Добавить безопасный `uninstall.php`.
- **Шаги выполнения**:
  - [x] Создать `uninstall.php` с проверкой `WP_UNINSTALL_PLUGIN`
  - [x] Задокументировать отсутствие удаляемых данных
- **Зависимости**: Нет

## Задача: WPCS: JSON и строгие сравнения
- **Статус**: Завершена
- **Описание**: Привести код к рекомендациям WPCS.
- **Шаги выполнения**:
  - [x] Заменить `json_encode` на `wp_json_encode`
  - [x] Включить strict-режим для `in_array()`
- **Зависимости**: Нет

## Задача: Фильтры расширения
- **Статус**: Завершена
- **Описание**: Добавить фильтры для кастомизации коллекции и имени файла.
- **Шаги выполнения**:
  - [x] `mksddn_postman_collection`
  - [x] `mksddn_postman_filename`
- **Зависимости**: Нет

## Задача: Условная смена namespace для форм
- **Статус**: Завершена
- **Описание**: Если активен `mksddn-forms-handler`, использовать `mksddn-forms-handler/v1/forms` вместо `wp/v2/forms` для list и submit.
- **Шаги выполнения**:
  - [x] Добавить проверку `is_plugin_active('mksddn-forms-handler/mksddn-forms-handler.php')`
  - [x] Обновить пути list и submit в `Postman_Routes::get_forms_routes`
  - [x] Обновить `docs/changelog.md`
- **Зависимости**: Нет

## Задача: Локальный прогон PCP
- **Статус**: Не начата
- **Описание**: Прогнать WordPress Plugin Check локально и устранить замечания.
- **Шаги выполнения**:
  - [ ] Прогон PCP
  - [ ] Исправить найденные замечания (если будут)
- **Зависимости**: Нет


